{"version":3,"sources":["FilterFormControl.js","book-placeholder.png","ImageLoad.js","BrowsePanelBook.js","BrowsePanel.js","GuidelinesPanel.js","BookBasketPanel.js","App.js","reportWebVitals.js","index.js"],"names":["AntOption","AntSelect","Option","Text","Typography","FilterFormControl","value","setValue","options","label","theme","useTheme","useMediaQuery","breakpoints","up","FormControl","size","sx","m","width","InputLabel","Select","onChange","event","target","MenuItem","color","map","option","style","margin","flexBasis","flexGrow","overflow","direction","type","defaultValue","dropdownMatchSelectWidth","ImageLoad","bookHeight","blurhash","src","useState","loading","setLoading","useEffect","imageToLoad","Image","onload","hash","height","Skeleton","variant","alt","React","memo","BrowsePanelBook","book","imageWidth","bookBasketOnRemove","isChoosing","isChosen","onBookClicked","bookStack","Stack","imageurl","bookWidth","processUrl","bookPlaceholder","Box","p","bgcolor","title","css","position","HoverableCancelIcon","onClick","number","display","justifyContent","alignItems","fontSize","top","left","styled","CancelIcon","url","encodeURIComponent","heights","fetcher","path","fetch","process","REACT_APP_DATA_FETCH_ENDPOINT","then","res","json","BrowserPanel","index","bookBasket","setBookBasket","mutate","useSWRConfig","combined","setCombined","useSWR","initialData","data","initialError","error","console","log","concat","books","isLoading","isError","useBooks","setChoosing","pageSize","setPageSize","ref","setRef","isIntersecting","useIntersectionObserver","search","setSearch","processedBooks","items","searchTerm","flexIndex","setFlexIndex","results","setResults","FlexSearch","Index","preset","tokenize","forEach","i","add","length","useSearch","series","setSeries","language","setLanguage","category","setCategory","aboveMD","socketIOClient","REACT_APP_FORM_SUBMISSION_ENDPOINT","on","categories","useMemo","Set","x","serieses","languages","useCallback","bookNumber","filter","y","alert","flexWrap","TextField","xs","sm","InputProps","startAdornment","InputAdornment","endAdornment","IconButton","breakpointCols","values","xl","md","className","columnClassName","slice","href","bottom","transform","right","Fab","mr","textTransform","choosing","GuidelinesPanel","Container","maxWidth","textAlign","BookBasketPanel","onBookRemoved","formik","useFormik","initialValues","home","validationSchema","Yup","required","onSubmit","resetForm","method","headers","Accept","body","JSON","stringify","success","setSubmitting","catch","err","id","handleSubmit","getFieldProps","touched","errors","helperText","Button","disabled","isSubmitting","form","ml","Backdrop","open","CircularProgress","StyledBadge","Badge","StyledTab","Tab","fontWeight","App","aboveSM","aboveXS","setImageWidth","widthObject","useImageWidth","align","Tabs","newValue","centered","badgeContent","BrowsePanel","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","ThemeProvider","createTheme","palette","primary","main","document","getElementById"],"mappings":"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","file":"static/js/main.7b6849f8.chunk.js","sourcesContent":["import { Typography, Space, Select as AntSelect } from \"antd\";\n\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\n\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { useTheme } from \"@mui/material/styles\";\n\nconst { Option: AntOption } = AntSelect;\nconst { Text } = Typography;\n\nfunction FilterFormControl({ value, setValue, options, label }) {\n  const theme = useTheme();\n  const aboveSM = useMediaQuery(theme.breakpoints.up(\"sm\"));\n\n  return aboveSM ? (\n    <FormControl size=\"small\" sx={{ m: 1, width: 150 }}>\n      <InputLabel>{label}</InputLabel>\n      <Select\n        value={value}\n        label={label}\n        onChange={(event) => {\n          setValue(event.target.value);\n       }}\n      >\n        <MenuItem value=\"\" sx={{ color: \"text.disabled\" }}>\n          None\n        </MenuItem>\n        {options.map((option) => {\n          return <MenuItem value={option}>{option}</MenuItem>;\n        })}\n      </Select>\n    </FormControl>\n  ) : (\n    <Space\n      size={1}\n      style={{\n        margin: \"5px\",\n        flexBasis: \"0%\",\n        flexGrow: 1,\n        overflow: \"hidden\",\n      }}\n      direction=\"vertical\"\n    >\n      <Text type=\"secondary\">{label}</Text>\n      <AntSelect\n        style={{ width: \"100%\" }}\n        defaultValue={value || \"\"}\n        onChange={(value) => {\n          setValue(value);\n        }}\n        dropdownMatchSelectWidth={false}\n      >\n        <AntOption value=\"\">None</AntOption>\n        {options.map((option) => {\n          return <AntOption value={option}>{option}</AntOption>;\n        })}\n      </AntSelect>\n    </Space>\n  );\n}\nexport default FilterFormControl;\n","export default \"data:image/png;base64,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m+mhF1MIje53B3pXzfw+o7LQG376QE+nn4mCgjhjp6dq5rjS6jX1rw31ouuRk6FLje9DqKL39ciL5UGf1GBoTp8okhfn9xUV1zSnG0X04i522PB+p+kLRSO99FB27tmuIze9o/h+39hmS1sF/UERfUjttIbs9KEi+oqKLF7Z6Yr2MzYjQpd6T42T9KueGb5LBVWWn35RQy9WkeQfa3vlp++t1k7PTOP7/U8Z6yuqoKAvQNdSTlAezLnfjgXoWrIUpULva24rtxOgP2gd6a/Nl7YKupYJvvQVKrn3JvT/Yrolk8R2L0A/KZnlSmmIj4ZZuWq6kjT0K124+SRBVxG9fPdtTQ/Uks9Cj1WO88JTOPW/O6yjNxtrTfT87ZO5UypvxUMvT/AtfRhfL+Mxdnov65RQRzIi9OfF9nRspVXUNzOELhX0a76Pr5mSljv07mXivW4zNS3XIRMZetww0S3UaryRw5t++2jFTI08jZhuRor+1DwmFmgjnqWNps95phPmVueNHN70881Uai5K5CfLNfk6B60jJfSGBTSu9NvkX60TPen5fSFGz8gsUZCWf1/GSY4+4UgEsY70KGLbZ9H0/LuIw/f7OZ8oTQTp2ShnN+OToru96VuKq4pQSlHrKhh8XAyZe7L093ICIR48z5er9Kut07ttXfqh8i+JthgnxlaUVHHT9dSJVtYVsdP1vHiqeO68FKdnSumDTJ6uqVj0Zs45tUHfabzd37I26NlR31zH8PZ9x+JSbXKO9IFrXe1A04C3y6xFerbSU0hm1lmr9Owy1IG3/X3WMl1JQZVlyw371dC/9gL3vB3yxY7er8s2AfFmkDG2Gk9OvI37Xb7vYHVsNk4m2ywLTP9bGuiggw466KCDDjrooIMOOuiggw466KCDDjrooIMOOuiggw466KCDDjrooIMOOuiggw466KCDDjrooIMOOuiggw466KCDDjrooIMOOuiggw466KCDDjrooIMOOuiggw466KCDDjrooIMOOuiggw466KCDDjrooIMOOuiggw466KCDDjrooIMO+k9t/wB5fGjRKKHOHQAAAABJRU5ErkJggg==\"","import React, { useState, useEffect } from \"react\";\n\nimport Skeleton from \"@mui/material/Skeleton\";\n\nimport { Blurhash } from \"react-blurhash\";\n\nfunction ImageLoad({ bookHeight, blurhash, src }) {\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // start loading original image\n    const imageToLoad = new Image();\n    imageToLoad.src = src;\n    imageToLoad.onload = () => {\n      // When image is loaded replace the src and set loading to false\n      setLoading(false);\n    };\n  }, [src]);\n\n return loading ? (\n    blurhash ? (\n      <Blurhash hash={blurhash} width=\"100%\" height={bookHeight} />\n    ) : (\n      <Skeleton variant=\"rectangular\" height={300} />\n    )\n  ) : (\n    <img width=\"100%\" height={bookHeight} alt=\"hey\" loading=\"lazy\" src={src} />\n  );\n}\nexport default React.memo(ImageLoad);\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\nimport { styled } from \"@mui/material/styles\";\nimport \"./App.css\";\nimport \"antd/dist/antd.css\";\n\nimport React from \"react\";\n\nimport Box from \"@mui/material/Box\";\nimport Stack from \"@mui/material/Stack\";\nimport CheckBoxOutlineBlankIcon from \"@mui/icons-material/CheckBoxOutlineBlank\";\nimport CancelIcon from \"@mui/icons-material/Cancel\";\nimport CheckIcon from \"@mui/icons-material/Check\";\n\nimport bookPlaceholder from \"./book-placeholder.png\";\nimport ImageLoad from \"./ImageLoad\";\n\nfunction BrowsePanelBook({\n  book,\n  imageWidth,\n  bookBasketOnRemove,\n  isChoosing,\n  isChosen,\n  onBookClicked,\n}) {\n  const bookStack = (\n    <Stack>\n      <ImageLoad\n        bookHeight={\n          book.imageurl ? (book.height / book.width) * imageWidth : null\n        }\n        bookWidth={book.imageurl ? imageWidth : null}\n        blurhash={book.blurhash}\n        src={\n          book.imageurl\n            ? processUrl(book.imageurl, imageWidth)\n            : bookPlaceholder\n        }\n      />\n      <Box\n        sx={{\n          color: \"white\",\n          p: 1,\n          bgcolor: \"text.secondary\",\n        }}\n      >\n        {book.title}\n      </Box>\n   </Stack>\n  )\n\n  return (\n    bookBasketOnRemove ?\n\n     ( <div css={{ position: \"relative\" }}>\n        <HoverableCancelIcon onClick={() => bookBasketOnRemove(book)} />\n    <Stack>\n      <ImageLoad\n        bookHeight={\n          book.imageurl ? (book.height / book.width) * imageWidth : null\n        }\n        blurhash={book.blurhash}\n        src={\n          book.imageurl\n            ? processUrl(book.imageurl, imageWidth)\n            : bookPlaceholder\n        }\n      />\n      <Box\n        sx={{\n          color: \"white\",\n          p: 1,\n          bgcolor: \"text.secondary\",\n        }}\n      >\n        {book.title}\n      </Box>\n    </Stack>\n      </div>)\n    :\n    (<div\n      onClick={() => {\n        if (isChoosing) {\n          onBookClicked(book);\n        }\n      }}\n      css={{ position: \"relative\" }}\n    >\n      {isChoosing &&\n          (isChosen(book.number) ? (\n            <Box\n              sx={{\n                bgcolor: \"text.secondary\",\n                position: \"absolute\",\n                width: \"100%\",\n                height: \"100%\",\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            >\n              <CheckIcon fontSize=\"large\" css={{ color: \"white\" }} />\n            </Box>\n          ) : (\n            <CheckBoxOutlineBlankIcon\n             fontSize=\"large\"\n              css={{\n                position: \"absolute\",\n                color: \"white\",\n                top: 10,\n                left: 10,\n              }}\n            />\n          ))}\n      {bookStack}\n    </div>)\n  );\n}\nconst HoverableCancelIcon = styled(CancelIcon)({\n  position: \"absolute\",\n  top: 1,\n  left: 1,\n  color: \"white\",\n  \"&:hover\": { color: \"black\" },\n});\n\nfunction processUrl(url, width) {\n  return `https://gvh-library.b-cdn.net/signature/width:${width}/resizing_type:fill/format:webp/plain/${encodeURIComponent(\n    url\n  )}`;\n}\n\nexport default React.memo(BrowsePanelBook);\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\nimport \"./App.css\";\nimport \"antd/dist/antd.css\";\n\nimport React, {\n  useState,\n  useEffect,\n  useMemo,\n  useCallback,\n} from \"react\";\n\nimport useIntersectionObserver from \"@react-hook/intersection-observer\";\nimport FlexSearch from \"flexsearch\";\nimport Masonry from \"react-masonry-css\";\nimport useSWR, {useSWRConfig} from 'swr'\nimport socketIOClient from \"socket.io-client\";\n\nimport Box from \"@mui/material/Box\";\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport Fab from \"@mui/material/Fab\";\nimport IconButton from \"@mui/material/IconButton\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\nimport TextField from \"@mui/material/TextField\";\nimport Skeleton from \"@mui/material/Skeleton\";\nimport { useTheme } from \"@mui/material/styles\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\n\nimport FilterFormControl from \"./FilterFormControl\";\nimport BrowsePanelBook from \"./BrowsePanelBook\";\n\nconst heights = [\n  150, 100, 160, 190, 110, 250, 130, 200, 130, 90, 100, 150, 190, 170, 80, 150,\n  100, 150, 230, 110, 150, 130, 100, 120, 90, 100, 150, 90, 190, 110,\n];\n\nconst fetcher = path => fetch(process.env.REACT_APP_DATA_FETCH_ENDPOINT + path).then(res => res.json()) \n\n\nfunction BrowserPanel({ value, index, bookBasket, setBookBasket, setValue, imageWidth }) {\n\n  const { mutate } = useSWRConfig()\n  const { books, isLoading, isError } = useBooks()\n\n  const [isChoosing, setChoosing] = useState(false);\n\n  //Pagination\n  const [pageSize, setPageSize] = useState(0);\n  const [ref, setRef] = useState();\n  const { isIntersecting } = useIntersectionObserver(ref);\n\n  //Search\n  const [search, setSearch] = useState(\"\");\n  const processedBooks = useSearch(books, search);\n\n  //Filter\n  const [series, setSeries] = useState(\"\");\n  const [language, setLanguage] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n\n  const theme = useTheme();\n  const aboveMD = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n  useEffect(() => {\n    setPageSize((size) => size + 20);\n  }, [isIntersecting]);\n\n  useEffect(() => {\n    setPageSize(20);\n  }, [value, search, series, language, category]);\n\n  useEffect(() => {\n    const socket = socketIOClient(process.env.REACT_APP_FORM_SUBMISSION_ENDPOINT);\n    socket.on(\"update\", data => {\n      console.log(\"Updated\")\n      mutate('/initial-books')\n      mutate('/books')\n    });\n  }, []);\n\n\n  //Potential error - if the monitor is too big, the \"isIntersecting dummy div\" might be visible in viewport\n  //even though 20 elements are displayed. That means there will be no more changes to \"isIntersecting\"\n  //when search or filters are changed, and page size will be stuck at 20\n\n  const categories = useMemo(\n    () => [...new Set(books.map((x) => x.category))],\n    [books]\n  );\n  const serieses = useMemo(\n    () => [...new Set(books.map((x) => x.series))],\n    [books]\n  );\n  const languages = useMemo(\n    () => [...new Set(books.map((x) => x.language))],\n    [books]\n  );\n\n  function filterFunction(book) {\n    return (\n      (book.series === series || series.length === 0) &&\n      (book.language === language || language.length === 0) &&\n      (book.category === category || category.length === 0)\n    );\n  }\n\n  const isChosen = useCallback(\n    (bookNumber) => {\n      return bookBasket.filter((x) => x.number === bookNumber).length > 0;\n    },\n    [bookBasket]\n  );\n\n  const onBookClicked = useCallback(\n    (book) => {\n      if (isChosen(book.number)) {\n        setBookBasket((x) => x.filter((y) => y.number !== book.number));\n      } else {\n        setBookBasket((x) => {\n          if (x.length === 20) {\n            alert(\"You cannot choose more than 20 books\");\n            return x;\n          } else {\n            return [...x, book];\n          }\n        });\n      }\n    },\n    [setBookBasket, isChosen]\n  );\n\n  if(isError){return <div>Error</div>}\n  return (\n    <div css={{ display: value === index ? null : \"none\" }}>\n      <Box\n        sx={{\n          display: \"flex\",\n          flexWrap: \"wrap\",\n          m: 1,\n          justifyContent: \"left\",\n          alignItems: \"flex-start\",\n        }}\n      >\n        <TextField\n          value={search}\n          onChange={(event) => {\n            setSearch(event.target.value);\n          }}\n          variant=\"outlined\"\n          size=\"small\"\n          label=\"Search\"\n          sx={{ m: 1, width: { xs: \"100%\", sm: 200 } }}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <SearchIcon />\n              </InputAdornment>\n            ),\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton size=\"small\" onClick={() => setSearch(\"\")}>\n                  <ClearIcon fontSize=\"inherit\" />\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n        <div\n          css={{\n            flexBasis: \"100%\",\n            height: \"0px\",\n            display: aboveMD ? \"none\" : null,\n          }}\n        />\n        <FilterFormControl\n          value={category}\n          setValue={setCategory}\n          options={categories}\n          label=\"Category\"\n        />\n        <FilterFormControl\n          value={series}\n          setValue={setSeries}\n          options={serieses}\n          label=\"Series\"\n        />\n        <FilterFormControl\n          value={language}\n          setValue={setLanguage}\n          options={languages}\n          label=\"Language\"\n        />\n      </Box>\n      <Masonry\n        breakpointCols={{\n          [theme.breakpoints.values.xl]: 4,\n          [theme.breakpoints.values.md]: 3,\n          [theme.breakpoints.values.sm]: 2,\n        }}\n        className=\"masonry\"\n        columnClassName=\"masonry-column\"\n        css={{ overflow: \"visible\" }}\n      >\n        {isLoading ?\n            heights.map((height, index) => (\n              <div key={index}>\n                <Skeleton variant=\"rectangular\" height={height} />\n              </div>\n            ))\n            : processedBooks\n            .filter(filterFunction)\n            .slice(0, pageSize)\n            .map((book) => (\n              <BrowsePanelBook\n                key={book.number}\n                book={book}\n                imageWidth={imageWidth}\n                isChoosing={isChoosing}\n                isChosen={isChosen}\n                onBookClicked={onBookClicked}\n              />\n            ))}\n        <div key=\"listener\" ref={setRef}>\n          <Skeleton variant=\"rectangular\" height=\"50px\" width=\"100%\" />\n        </div>\n      </Masonry>\n      <a href=\"#top\">\n        <KeyboardArrowUpIcon\n          css={{\n            bottom: 20,\n            position: \"fixed\",\n            left: \"50%\",\n            transform: \"translateX(-50%)\",\n          }}\n          color=\"action\"\n          fontSize=\"large\"\n        />\n      </a>\n      <div\n        css={{\n          bottom: 20,\n          right: 20,\n          position: \"fixed\",\n          display: \"flex\",\n          alignItems: \"center\",\n        }}\n      >\n        {isChoosing && (\n          <Fab\n            variant=\"extended\"\n            onClick={() => setValue(2)}\n            color=\"primary\"\n            sx={{\n              color: \"white\",\n              mr: 1,\n              textTransform: \"none\",\n            }}\n          >\n            Checkout Books\n          </Fab>\n        )}\n        <Fab\n          onClick={() => setChoosing((choosing) => !choosing)}\n          color={isChoosing ? \"text.secondary\" : \"primary\"}\n        >\n          {isChoosing ? (\n            <ClearIcon />\n          ) : (\n            <AddIcon\n              css={{\n                color: \"white\",\n              }}\n            />\n          )}\n        </Fab>\n      </div>\n    </div>\n  );\n}\n\nfunction useBooks () {\n  const [combined, setCombined] = useState([])\n  const { data: initialData, error: initialError} = useSWR(\"/initial-books\", fetcher)\n  const { data, error } = useSWR(\"/books\", fetcher)\n\n  useEffect(() => {\n    console.log(\"Initial Data\", initialData)\n    console.log(\"Data\", data)\n    setCombined([].concat(initialData ? initialData : [], data ? data : []))\n  }, [initialData, data]);\n\n  if(error || initialError){\n    console.log(\"Initial error\", initialError)\n    console.log(\"Error\", error)\n  }\n\n  return {\n    books: combined,\n    isLoading: !initialError && !error && !initialData && !data,\n    isError: initialError || error\n  }\n}\n\nfunction useSearch(items, searchTerm) {\n  const [flexIndex, setFlexIndex] = useState(null);\n  const [results, setResults] = useState([]);\n\n  useEffect(() => {\n    const index = new FlexSearch.Index({\n      preset: \"match\",\n      tokenize: \"forward\",\n    });\n    items.forEach(({ title }, i) => {\n      index.add(i, title);\n    });\n    setFlexIndex(index);\n  }, [items]);\n\n  useEffect(() => {\n    if (flexIndex !== null) {\n      setResults(flexIndex.search(searchTerm).map((index) => items[index]));\n    }\n  }, [searchTerm, items, flexIndex]);\n\n  return searchTerm.length === 0 ? items : results;\n}\n\nexport default BrowserPanel;\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\nimport \"./App.css\";\n\nimport Container from \"@mui/material/Container\";\nimport React from \"react\";\n\nfunction GuidelinesPanel({ value, index }) {\n  return value === index && (\n    <Container maxWidth=\"xs\">\n      <br></br>\n      <h3 css={{textAlign: \"center\"}}>Guidelines for borrowing books</h3>\n      <ol>\n        <li>Do not damage books</li>\n        <li>Return all books</li>\n        <li>If there are any damages, report to Joseph/Philip</li>\n        <li><b>Each home may borrow up to 20 books for 4 weeks</b></li>\n      </ol>\n      </Container>\n  );\n}\n\nexport default GuidelinesPanel;\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\nimport { styled } from \"@mui/material/styles\";\nimport \"./App.css\";\n\nimport React from \"react\";\n\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport Masonry from \"react-masonry-css\";\nimport ImageLoad from \"./ImageLoad\";\n\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport CancelIcon from \"@mui/icons-material/Cancel\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport Backdrop from \"@mui/material/Backdrop\";\nimport { useTheme } from \"@mui/material/styles\";\nimport BrowsePanelBook from \"./BrowsePanelBook\";\n\nfunction BookBasketPanel({ value, index, bookBasket, setBookBasket, imageWidth }) {\n  function onBookRemoved(book) {\n    setBookBasket((x) => [...x.filter((y) => y.number !== book.number)]);\n  }\n  const theme = useTheme();\n\n const formik = useFormik({\n    initialValues: { home: \"\" },\n    validationSchema: Yup.object({\n      home: Yup.string().required(\"Please input a value\"),\n    }),\n    onSubmit: (values, { resetForm }) => {\n      values[\"books\"] = bookBasket;\n\n      fetch(process.env.REACT_APP_FORM_SUBMISSION_ENDPOINT + \"/submit-books\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"text/html\",\n        },\n        body: JSON.stringify(values, null, 2),\n      })\n        .then((success) => {\n          if (success) {\n            alert(\"Form successfully submitted\");\n          } else {\n            alert(\"Error. Please try again\");\n          }\n          formik.setSubmitting(false);\n          setBookBasket([]);\n          resetForm({ values: \"\" });\n        })\n        .catch((err) => {\n          alert(\"My client error: \" + err);\n        });\n    },\n  });\n\n  return (\n    value === index && (\n      <>\n        <Box\n          sx={{\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            alignItems: \"flex-start\",\n            m: 1,\n            justifyContent: \"center\",\n          }}\n        >\n          <form id=\"submitBooksForm\" onSubmit={formik.handleSubmit}>\n            <TextField\n              id=\"home\"\n              {...formik.getFieldProps(\"home\")}\n              label=\"Name of Home\"\n              variant=\"outlined\"\n              size=\"small\"\n              margin=\"none\"\n              error={formik.touched.home && formik.errors.home ? true : false}\n              helperText={\n                formik.touched.home && formik.errors.home\n                  ? formik.errors.home\n                  : \" \"\n              }\n            />\n          </form>\n\n          <Button\n            variant=\"contained\"\n            type=\"submit\"\n            disabled={formik.isSubmitting}\n            form=\"submitBooksForm\"\n            sx={{\n              color: \"white\",\n              textTransform: \"none\",\n              ml: 0.5,\n              mr: 0.5,\n              p: 1,\n            }}\n          >\n            Submit Form\n          </Button>\n        </Box>\n        <Masonry\n          breakpointCols={{\n            [theme.breakpoints.values.xl]: 4,\n            [theme.breakpoints.values.md]: 3,\n            [theme.breakpoints.values.sm]: 2,\n          }}\n          className=\"masonry\"\n          columnClassName=\"masonry-column\"\n          css={{ overflow: \"visible\" }}\n        >\n          {bookBasket.map((book) => (\n            <BrowsePanelBook\n              key={book.number}\n              book={book}\n              imageWidth={imageWidth}\n             bookBasketOnRemove={onBookRemoved} \n            />\n          ))}\n        </Masonry>\n\n        <Backdrop\n          css={{\n            color: \"#fff\",\n          }}\n          open={formik.isSubmitting}\n        >\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n      </>\n    )\n  );\n}\n\nexport default BookBasketPanel;\n","/** @jsxImportSource @emotion/react */\nimport { css } from \"@emotion/react\";\nimport { styled, useTheme } from \"@mui/material/styles\";\nimport \"./App.css\";\n//I use the emotion css prop UNLESS I need to use one of the custom attributes\n//that can be accessed with sx.\n\nimport React, { useState, useEffect } from \"react\";\n\nimport Container from \"@mui/material/Container\";\nimport Typography from \"@mui/material/Typography\";\nimport Tabs from \"@mui/material/Tabs\";\nimport Tab from \"@mui/material/Tab\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport ShoppingBasketIcon from \"@mui/icons-material/ShoppingBasket\";\nimport Badge from \"@mui/material/Badge\";\n\nimport BrowsePanel from \"./BrowsePanel\";\nimport GuidelinesPanel from \"./GuidelinesPanel\";\nimport BookBasketPanel from \"./BookBasketPanel\";\n\nfunction App() {\n  const [value, setValue] = useState(0);\n  const [bookBasket, setBookBasket] = useState([]);\n\n  const theme = useTheme();\n  const aboveMD = useMediaQuery(theme.breakpoints.up(\"md\")) ? \"md\" : false;\n  const aboveSM = useMediaQuery(theme.breakpoints.up(\"sm\")) ? \"sm\" : false;\n  const aboveXS = useMediaQuery(theme.breakpoints.up(\"xs\")) ? \"xs\" : false;\n  const imageWidth = useImageWidth(aboveMD, aboveSM, aboveXS);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n };\n\n  return (\n    <Container maxWidth={aboveMD ? \"md\" : aboveSM ? \"sm\" : \"xs\"}>\n      <Typography sx={{ color: \"#64291B\" }} variant=\"h3\" m={3} align=\"center\">\n        GVH Library\n      </Typography>\n\n      <div css={{ position: \"relative\" }}>\n        <Tabs value={value} onChange={handleChange} centered>\n          <StyledTab label=\"Browse\" />\n          <StyledTab label=\"Guidelines\" />\n        </Tabs>\n        <StyledBadge badgeContent={bookBasket.length} color=\"primary\">\n          <ShoppingBasketIcon\n            onClick={() => {\n              setValue(2);\n            }}\n            color={value === 2 ? \"primary\" : \"action\"}\n            fontSize=\"large\"\n          />\n        </StyledBadge>\n      </div>\n      <BrowsePanel\n        value={value}\n        index={0}\n        bookBasket={bookBasket}\n        setBookBasket={setBookBasket}\n        setValue={setValue}\n        imageWidth={imageWidth}\n      />\n      <GuidelinesPanel value={value} index={1} />\n      <BookBasketPanel\n        value={value}\n        index={2}\n        bookBasket={bookBasket}\n        setBookBasket={setBookBasket}\n        imageWidth={imageWidth}\n      />\n    </Container>\n  );\n}\n\nconst StyledBadge = styled(Badge)(({ theme }) => ({\n  position: \"absolute\",\n  right: 0,\n  top: 0,\n  \"& .MuiBadge-badge\": {\n    top: 13,\n    color: \"white\",\n  },\n}));\n\nconst StyledTab = styled(Tab)({\n  textTransform: \"none\",\n  fontWeight: \"bold\",\n});\n\nfunction useImageWidth(aboveMD, aboveSM, aboveXS) {\n  const [imageWidth, setImageWidth] = useState(0)\n  const widthObject = {\n    md: 206,\n    sm: 177,\n    xs: 201,\n  };\n\n  useEffect(() => {\n    const which = aboveMD || aboveSM || aboveXS;\n    setImageWidth(widthObject[which])\n  }, [aboveMD, aboveSM, aboveXS])\n\n  return imageWidth\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { ThemeProvider } from \"@mui/material/styles\";\nimport { createTheme } from \"@mui/material/styles\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider\n      theme={createTheme({\n        palette: {\n          primary: { main: \"#ADBE60\" },\n        },\n      })}\n    >\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}